import{F as v,r as n,u,A as S,b as e,j as a}from"./index-555376f6.js";import{T as f}from"./Tooltip-9f0259ee.js";import{P as y,R as b,V as k,Z as p,W as C,X as F,L,Y as j,Q as c}from"./App-36a15c4e.js";import{S as I}from"./Swap-de83fdf3.js";import{S as N}from"./SkeletonCard-d019d2bf.js";const R="/images/alt-logo.png",T=v.div`absolute top-0 right-0 left-0 bottom-0 flex h-full w-full items-center justify-center bg-black/50 opacity-0 duration-300 group-hover:opacity-100`,$=({artistData:s,isFetching:h})=>{const i=n.useRef(null),g=y(i);u(o=>{var l;return(l=o.auth)==null?void 0:l.authenticated});const[d,w]=n.useState(!0),t=u(o=>{var l;return(l=o.collections)==null?void 0:l.artists}),[x,{isLoading:E}]=S(),[r,m]=n.useState(!1);n.useEffect(()=>{m(()=>Array.isArray(t)&&(t==null?void 0:t.some(o=>o._id===s._id)))},[t]);const A=async o=>{try{await x(o),m(!r),r?c.info(`You've unfollowed ${o.name}`):c.success(`You've followed ${o.name}`)}catch(l){c.info(l.message)}};return e("div",{ref:i,children:!g||h?e(N,{mask:"circle"}):a(b,{children:[a(k,{mask:"circle",children:[e(T,{children:e(I,{swapon:e(f,{"data-tip":"Unfollow",children:e(p,{className:"text-3xl text-success"})}),swapoff:e(f,{"data-tip":"Follow",children:e(p,{className:"text-3xl text-neutral-content"})}),onChange:()=>A(s),checked:r})}),d&&e(C,{tw:"min-w-full aspect-[1]"}),e("img",{src:s==null?void 0:s.avatar,onError:({currentTarget:o})=>{o.onerror=null,o.src=R},alt:"thumbnail",onLoad:()=>w(!1),loading:"eager",className:d?"hidden":"aspect-[1] min-w-full object-cover"})]}),a(F,{children:[e(L,{to:`/artist/${s._id}`,className:"hover:link",children:e(j,{children:s.name})}),e("p",{className:"truncate text-base-content/50 sm:text-sm",children:s.desc??"Artist"})]})]})})},U=n.memo($);export{U as A};
